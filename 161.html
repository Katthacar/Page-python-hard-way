<!DOCTYPE html >
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p161" style="overflow: hidden; position: relative; background-color: white; width: 742px; height: 976px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	-webkit-transform-origin: bottom left;
	-ms-transform-origin: bottom left;
	transform-origin: bottom left;
	-webkit-transform: scale(0.25);
	-ms-transform: scale(0.25);
	transform: scale(0.25);
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_161{left:59px;bottom:919px;}
#t2_161{left:58px;bottom:888px;letter-spacing:2.7px;word-spacing:-3.4px;}
#t3_161{left:60px;bottom:814px;letter-spacing:-0.3px;}
#t4_161{left:60px;bottom:739px;}
#t5_161{left:89px;bottom:769px;word-spacing:3.2px;}
#t6_161{left:89px;bottom:751px;word-spacing:5px;}
#t7_161{left:60px;bottom:733px;letter-spacing:-0.2px;word-spacing:5px;}
#t8_161{left:60px;bottom:714px;word-spacing:5.3px;}
#t9_161{left:228px;bottom:714px;}
#ta_161{left:279px;bottom:714px;}
#tb_161{left:305px;bottom:714px;}
#tc_161{left:357px;bottom:714px;word-spacing:5.4px;}
#td_161{left:60px;bottom:696px;letter-spacing:-0.1px;word-spacing:4.9px;}
#te_161{left:60px;bottom:678px;letter-spacing:-0.2px;word-spacing:5px;}
#tf_161{left:60px;bottom:660px;word-spacing:1.4px;}
#tg_161{left:60px;bottom:628px;word-spacing:3.5px;}
#th_161{left:60px;bottom:609px;word-spacing:-0.8px;}
#ti_161{left:60px;bottom:591px;word-spacing:0.3px;}
#tj_161{left:60px;bottom:573px;word-spacing:1.3px;}
#tk_161{left:60px;bottom:554px;letter-spacing:-0.1px;word-spacing:4.3px;}
#tl_161{left:60px;bottom:536px;letter-spacing:-0.3px;word-spacing:2px;}
#tm_161{left:60px;bottom:504px;letter-spacing:-0.2px;word-spacing:1.4px;}
#tn_161{left:60px;bottom:486px;word-spacing:1.5px;}
#to_161{left:85px;bottom:453px;}
#tp_161{left:114px;bottom:453px;word-spacing:4.6px;}
#tq_161{left:114px;bottom:433px;letter-spacing:-0.1px;word-spacing:0.1px;}
#tr_161{left:311px;bottom:433px;}
#ts_161{left:361px;bottom:433px;word-spacing:-0.1px;}
#tt_161{left:114px;bottom:413px;letter-spacing:-0.2px;word-spacing:1.8px;}
#tu_161{left:85px;bottom:387px;}
#tv_161{left:114px;bottom:387px;letter-spacing:-0.2px;word-spacing:-1.4px;}
#tw_161{left:352px;bottom:387px;letter-spacing:-0.6px;}
#tx_161{left:380px;bottom:387px;letter-spacing:-0.1px;word-spacing:-1.7px;}
#ty_161{left:114px;bottom:367px;word-spacing:3.3px;}
#tz_161{left:576px;bottom:367px;}
#t10_161{left:114px;bottom:347px;word-spacing:-0.5px;}
#t11_161{left:114px;bottom:328px;word-spacing:1.5px;}
#t12_161{left:85px;bottom:302px;}
#t13_161{left:114px;bottom:302px;letter-spacing:-0.1px;word-spacing:3.9px;}
#t14_161{left:114px;bottom:282px;letter-spacing:-0.1px;word-spacing:2.1px;}
#t15_161{left:114px;bottom:262px;word-spacing:2.6px;}
#t16_161{left:569px;bottom:262px;letter-spacing:-1.6px;}
#t17_161{left:633px;bottom:262px;}
#t18_161{left:114px;bottom:242px;word-spacing:1.5px;}
#t19_161{left:60px;bottom:210px;letter-spacing:-0.1px;word-spacing:1.5px;}
#t1a_161{left:314px;bottom:210px;word-spacing:1.4px;}
#t1b_161{left:430px;bottom:210px;letter-spacing:-1.7px;}
#t1c_161{left:60px;bottom:150px;letter-spacing:0.1px;word-spacing:2.9px;}
#t1d_161{left:60px;bottom:123px;word-spacing:-0.5px;}
#t1e_161{left:60px;bottom:105px;word-spacing:0.2px;}

.s1_161{
	FONT-SIZE: 54.8px;
	FONT-FAMILY: LQYZGV-2bArialMTStd-2dBlack_2hn;
	color: rgb(0,0,0);
}

.s2_161{
	FONT-SIZE: 60.9px;
	FONT-FAMILY: MSDAXO-2bArialRoundedMTStd_2hj;
	color: rgb(255,255,255);
}

.s3_161{
	FONT-SIZE: 146.1px;
	FONT-FAMILY: HVCREH-2bArialNarrowMTStd-2_2hh;
	color: rgb(0,0,0);
}

.s4_161{
	FONT-SIZE: 156.5px;
	FONT-FAMILY: VRSKYG-2bArialMTStd-2dRegul_2hd;
	color: rgb(0,0,0);
}

.s5_161{
	FONT-SIZE: 51.7px;
	FONT-FAMILY: VRSKYG-2bArialMTStd-2dRegul_2hd;
	color: rgb(0,0,0);
}

.s6_161{
	FONT-SIZE: 51.7px;
	FONT-FAMILY: YZLQNG-2bBitstreamVeraSansM_2ma;
	color: rgb(0,0,0);
}

.s7_161{
	FONT-SIZE: 51.7px;
	FONT-FAMILY: JMZDTN-2bArialMTStd-2dItali_2hx;
	color: rgb(0,0,0);
}

.s8_161{
	FONT-SIZE: 97.4px;
	FONT-FAMILY: MSDAXO-2bArialRoundedMTStd_2hj;
	color: rgb(0,0,0);
}

</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts161" type="text/css" >

@font-face {
	font-family: HVCREH-2bArialNarrowMTStd-2_2hh;
	src: url("fonts/HVCREH-2bArialNarrowMTStd-2_2hh.woff") format("woff");
}

@font-face {
	font-family: JMZDTN-2bArialMTStd-2dItali_2hx;
	src: url("fonts/JMZDTN-2bArialMTStd-2dItali_2hx.woff") format("woff");
}

@font-face {
	font-family: LQYZGV-2bArialMTStd-2dBlack_2hn;
	src: url("fonts/LQYZGV-2bArialMTStd-2dBlack_2hn.woff") format("woff");
}

@font-face {
	font-family: MSDAXO-2bArialRoundedMTStd_2hj;
	src: url("fonts/MSDAXO-2bArialRoundedMTStd_2hj.woff") format("woff");
}

@font-face {
	font-family: VRSKYG-2bArialMTStd-2dRegul_2hd;
	src: url("fonts/VRSKYG-2bArialMTStd-2dRegul_2hd.woff") format("woff");
}

@font-face {
	font-family: YZLQNG-2bBitstreamVeraSansM_2ma;
	src: url("fonts/YZLQNG-2bBitstreamVeraSansM_2ma.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg161Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg161" style="-webkit-user-select: none;"><object width="742" height="976" data="161/161.svg" type="image/svg+xml" id="pdf161" style="width:742px; height:976px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div id="t1_161" class="t s1_161">144</div>
<div id="t2_161" class="t s2_161">EXERCISE 34</div>
<div id="t3_161" class="t s3_161">Analyzers</div>
<div id="t4_161" class="t s4_161">Y</div>
<div id="t5_161" class="t s5_161">ou now have a parser that should be producing a tree of grammar production objects. I’ll call this</div>
<div id="t6_161" class="t s5_161">your “parse tree,” and it means you can analyze the whole program by starting at the top of the</div>
<div id="t7_161" class="t s5_161">parse tree and then “walking” it until you’ve visited every node. You’ve done something like this when</div>
<div id="t8_161" class="t s5_161">you were learning about the</div>
<div id="t9_161" class="t s6_161">BSTree</div>
<div id="ta_161" class="t s5_161">and</div>
<div id="tb_161" class="t s6_161">TSTree</div>
<div id="tc_161" class="t s5_161">data structures. You started at the top and visited</div>
<div id="td_161" class="t s5_161">each node, and the order you visited them in (depth-ﬁrst, breadth-ﬁrst, in-order, etc.) determined how</div>
<div id="te_161" class="t s5_161">the nodes were processed. Your parse tree has the same capability, and your next step in writing the</div>
<div id="tf_161" class="t s5_161">little Python interpreter is to walk the tree and analyze it.</div>
<div id="tg_161" class="t s5_161">The analyzer’s job is to ﬁnd semantic mistakes in your grammar and to ﬁx or add information the next</div>
<div id="th_161" class="t s5_161">stage needs. The semantic mistakes are errors that, while grammatically correct, don’t make sense as a</div>
<div id="ti_161" class="t s5_161">Python program. This can be anything from a variable that hasn’t been deﬁned yet to non-sequitur code</div>
<div id="tj_161" class="t s5_161">that simply makes no sense. Some language grammars are so loose the analyzer has to do more work</div>
<div id="tk_161" class="t s5_161">to ﬁx the parse tree. Other languages are so easy to parse and process that they don’t even need an</div>
<div id="tl_161" class="t s5_161">analyzer step.</div>
<div id="tm_161" class="t s5_161">To write an analyzer you’ll need a way to visit each node in your parse tree, analyze it for errors, and ﬁx</div>
<div id="tn_161" class="t s5_161">any missing information. There are three general ways you can do this:</div>
<div id="to_161" class="t s5_161">1.</div>
<div id="tp_161" class="t s5_161">You create an analyzer that knows how to update each grammar production. It will walk the</div>
<div id="tq_161" class="t s5_161">parse tree in a similar way as your</div>
<div id="tr_161" class="t s6_161">Parser</div>
<div id="ts_161" class="t s5_161">did, with a function for each type of production, but</div>
<div id="tt_161" class="t s5_161">its job is to alter, update, and check the productions.</div>
<div id="tu_161" class="t s5_161">2.</div>
<div id="tv_161" class="t s5_161">You change your grammar productions so</div>
<div id="tw_161" class="t s7_161">they</div>
<div id="tx_161" class="t s5_161">know how to analyze their own state. Then your</div>
<div id="ty_161" class="t s5_161">analyzer is simply an engine that walks the parse tree calling each production’s</div>
<div id="tz_161" class="t s6_161">analyze()</div>
<div id="t10_161" class="t s5_161">method. With this style you’ll need some state that is passed around to each grammar produc-</div>
<div id="t11_161" class="t s5_161">tion class, which should be a third class.</div>
<div id="t12_161" class="t s5_161">3.</div>
<div id="t13_161" class="t s5_161">You create a separate set of classes that implement the ﬁnal analyzed tree you can hand to</div>
<div id="t14_161" class="t s5_161">an interpreter. In many ways you’d mirror the parser’s grammar productions with a set of new</div>
<div id="t15_161" class="t s5_161">classes that take a global state and a grammar production, and conﬁgure their</div>
<div id="t16_161" class="t s6_161">__init__</div>
<div id="t17_161" class="t s5_161">so</div>
<div id="t18_161" class="t s5_161">that they’re the analyzed result.</div>
<div id="t19_161" class="t s5_161">I recommend either item 2 or item 3 for your</div>
<div id="t1a_161" class="t s7_161">Exercise Challenge</div>
<div id="t1b_161" class="t s5_161">today.</div>
<div id="t1c_161" class="t s8_161">Visitor Pattern</div>
<div id="t1d_161" class="t s5_161">The “visitor pattern” is a very common technique in object-oriented languages where you create classes</div>
<div id="t1e_161" class="t s5_161">that know what they should do when “visited.” This lets you centralize the code for processing a class to</div>

<!-- End text definitions -->


</div>
</body>
</html>
